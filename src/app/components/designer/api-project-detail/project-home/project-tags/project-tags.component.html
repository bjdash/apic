<form class="form-horizontal" [formGroup]="tagsForm">
    <div class="tags" formArrayName="tags" *ngFor="let item of tagsForm.get('tags')['controls']; let i = index;">
        <div [formGroupName]="i">
            <div class="row">
                <label class="control-label col-sm-3">Name: <span class="red">*</span></label>
                <div class="control-label col-xs-6">
                    <input formControlName="name" class="form-control input-sm">
                </div>
            </div>
            <div class="row">
                <label class="control-label col-sm-3">Description: </label>
                <div class="control-label col-xs-6">
                    <textarea formControlName="description" class="form-control input-sm"></textarea>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-9">
                    <fieldset>
                        <legend>External docs</legend>
                        <div formGroupName="externalDocs">
                            <div class="row">
                                <label class="control-label col-xs-4">url</label>
                                <div class="col-xs-8">
                                    <input formControlName="url" class="form-control input-sm">
                                </div>
                            </div>
                            <div class="row">
                                <label class="control-label col-sm-4">Description: </label>
                                <div class="control-label col-xs-8">
                                    <textarea formControlName="description" class="form-control input-sm"></textarea>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>

            <div class="row">
                <label class="control-label top col-xs-3">
                    <span>^x-property</span>
                </label>
                <div class="col-xs-7">
                    <app-key-value-editor formControlName="xProperty" [options]="addPropOption">
                    </app-key-value-editor>
                </div>
            </div>
        </div>
        <button mat-icon-button type="button" class="red topLeft" (click)="removeTag(i)">
            <mat-icon>delete</mat-icon>
        </button>
    </div>
    <div class="row margV10">
        <div class="col-xs-offset-2 col-xs-4" *ngIf="tagsForm.get('tags')['controls'].length>0 ||tagsForm.dirty">
            <button mat-raised-button color="primary" class="sm gap" (click)="saveTags()"
                [disabled]="!tagsForm.dirty">Save</button>
            <button mat-stroked-button (click)="addTag()" type="button" class="sm gap t_border">Add another</button>
            <button mat-button *ngIf="tagsForm.dirty" type="button" class="sm" (click)="refreshForm()">Discard</button>
        </div>
        <div class="col-xs-5 " *ngIf="tagsForm.get('tags')['controls'].length==0 && !tagsForm.dirty">
            <button mat-stroked-button (click)="addTag()" type="button" class="sm gap">Add tag </button>
        </div>
    </div>
</form>